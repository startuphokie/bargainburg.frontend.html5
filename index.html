<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">
        <link rel="shortcut icon" href="lib/bootstrap-3.0.0/assets/ico/favicon.png">
        <title>Bargainburg</title>
        <!-- Bootstrap core CSS -->
        <link href="lib/bootstrap-3.0.0/dist/css/bootstrap.css" rel="stylesheet">
        <!-- Custom styles for this template -->
        <link href="lib/sticky-footer.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
        <script src="../../assets/js/html5shiv.js"></script>
        <script src="../../assets/js/respond.min.js"></script>
        <![endif]-->
    </head>
    <body>
        <script type='text/x-handlebars'>
        <!-- Wrap all page content here -->
        <div id="wrap">
            <!-- Begin page content -->
            <div class="container">
                <div class="navbar navbar-default">
                    <div class="container">
                        <div class="navbar-header">
                            <h1 style="color:rgb(64,153,255)">Bargainburg
                            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            </button></h1>
                            <div class="collapse navbar-collapse">
                                <ul class="nav navbar-nav">
                                    {{#link-to 'categories' tag='li'}}
                                        <a href='#' {{bindAttr href="view.href"}}>
                                            <span class="glyphicon glyphicon-tasks"></span> Categories
                                        </a>
                                    {{/link-to}}

                                    {{#link-to 'businesses' tag='li'}}
                                        <a href='#' {{bindAttr href="view.href"}}>
                                            <span class="glyphicon glyphicon-briefcase"></span> Businesses
                                        </a>
                                    {{/link-to}}

                                    {{#link-to 'search.index' tag='li'}}
                                        <a href='#' {{bindAttr href="view.href"}}>
                                            <span class="glyphicon glyphicon-search"></span> Search
                                        </a>
                                    {{/link-to}}

                                </ul>
                            </div>
                        </div>
                        <!--/.nav-collapse -->
                    </div>
                </div>
                <p></p>
                {{outlet}}
            </div>
        </div>
        <p></p>
        <div id="footer">
            <div class="container" style="background-color:rgb(40,40,40)">
                <p class="text-muted credit">Created by the Students of VT CS 4704</p>
            </div>
        </div>

        </script>

        <script type='text/x-handlebars' data-template-name='search/_search-bar'>
            <div class="input-group">
                {{input type='text' id='search-bar' class='form-control'
                placeholder="Search for a business, service, or coupon!"
                value=query}}
                <span {{action 'search' query}} id='search-button' class="input-group-addon btn btn-default" type="button">
                    <span class="glyphicon glyphicon-search"></span>
                </span>
            </div>
        </script>

        <script type='text/x-handlebars' data-template-name='search/index'>
            {{partial 'search/search-bar'}}
        </script>


        <script type='text/x-handlebars' data-template-name='search/query'>
            {{partial 'search/search-bar'}}
            <br>
            <div>
                <div class="list-group">
                    {{#each}}
                    {{#isBusiness}}
                        {{#link-to 'business' id class='list-group-item'}}
                            <h5 class="list-group-item-heading">{{name}}</h5>
                        {{/link-to}}
                    {{else}}
                        {{#link-to 'coupon' id class='list-group-item'}}
                            <h5 class="list-group-item-heading">{{name}}</h5>
                        {{/link-to}}
                    {{/isBusiness}}
                    {{/each}}
                </div>
            </div>
        </script>

        <script type='text/x-handlebars' data-template-name='categories'>
            {{#each}}
            <button type="button" class="btn btn-block btn-primary category-btn">
                <h5>{{name}}</h5>
            </button>
            <div style='display:none'>
                {{#each merchants}}
                    {{#link-to 'business' id class='list-group-item'}}
                        <h5 class="list-group-item-heading">{{name}}</h5>
                    {{/link-to}}
                {{/each}}
            </div>
            {{/each}}
        </script>

        <script type='text/x-handlebars' data-template-name='businesses'>
            <a class="list-group-item active">
                <h4 class="list-group-item-heading" style="text-align:center">Look up your favorite places here!</h4>
            </a>
            {{#each}}
                {{#link-to 'business' id class='list-group-item'}}
                    <h4 class="list-group-item-heading">{{name}}</h4>
                {{/link-to}}
            {{/each}}
        </script>

        <script type='text/x-handlebars' data-template-name='business'>
            <div class='list-group-item active'>
                {{#link-to 'business' id }}
                    <h4 class="list-group-item-heading"
                        style="text-align:center;color:white">{{name}}</h4> 
                {{/link-to}}
                <h5>Phone: {{phone}}</h5>
                <h5>Email: {{email}}</h5>
                <h5>Hours of Operation: {{hours}}</h5>
                <h5>Price: {{price-glyphs price_range}}</h5>

                <div>
                    <a href="javascript:void(0);"
                    class="list-group-item-heading"
                    style='text-decoration:underline' data-toggle="collapse"
                        data-target='#description'>More Information...</a>
                </div>
                <div id="description" class="collapse">
                    <h5>{{description}}</h5>
                </div>

            </div>
            {{#each coupons}}
                <a href="javascript:void(0);" class="list-group-item coupon" {{bind-attr
                data-name=name}}>
                  <h5 class="list-group-item-heading">{{name}}</h5>
                </a>
            {{/each}}
        </script>

        <script type='text/x-handlebars' data-template-name='coupon'>
            Name: {{name}}
            Description: {{description}}
            <!-- Look at
                 http://api.bargainburg.co/v1/coupons?merchant_id=16
                 for other properties
             -->
        </script>

       <script type='text/x-handlebars' data-template-name='loading'>
            <div id='loading' style='position: absolute; top: 0; width: 100%; z-index: 1001;'>
                <div class="progress progress-striped active" style='height:21px'>
                    <div class="progress-bar"  role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="50" style="width: 100%">
                        <span class="sr-only"></span>
                    </div>
                </div>
                <h2 style='width: 100px; margin-left: auto; margin-right: auto;
                top: -41px; position: relative;font-size: 1.3em; color: white;'>Loading</h2>
            </div>
        </script>


        <!-- Bootstrap core JavaScript
            ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->

        <script src="lib/jquery-2.0.3.min.js"></script>
        <script src="lib/bootstrap-3.0.0/dist/js/bootstrap.min.js"></script>

        <!-- EmberJS -->
        <script type='text/javascript' src='lib/handlebars-1.0.0.js'></script>
        <script type='text/javascript' src='lib/ember.js'></script>

        <!-- App -->
        <script type='text/javascript' src='./app.js'></script>
        <script type='text/javascript' src='./ui.js'></script>

    </body>
</html>

